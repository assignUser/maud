- name: empty
  template: ''
  rendered: ''
  compiled: ''

- name: literal
  template: |
    Hello world
  rendered: |
    Hello world
  compiled: |

    # literal 1:1-2:1
    ##################################################################################
    # Hello world
    # ^~~~~~~~~~~~
    #v
    # 
    ##################################################################################
    render([[Hello world
    ]])

- name: literal at
  template: |
    Hello @@ world
  rendered: |
    Hello @ world
  compiled: |

    # literal 1:1-1:7
    ##################################################################################
    # Hello @@ world
    # ^~~~~^
    ##################################################################################
    render([[Hello ]])

    # @@ -> @ 1:8-1:8
    ##################################################################################
    # Hello @@ world
    #        ^
    ##################################################################################
    render("@")

    # literal 1:9-2:1
    ##################################################################################
    # Hello @@ world
    #         ^~~~~~~
    #v
    # 
    ##################################################################################
    render([[ world
    ]])

- name: explicit render
  template: '@render("foo\n")'
  compiled: |

    # commands 1:2-1:17
    ##################################################################################
    # @render("foo\n")
    #  ^~~~~~~~~~~~~~^
    ##################################################################################
    render("foo\n")

  rendered: |
    foo

- name: DISABLED_explicit render err
  template: '@render("foo\n"'
  compiled: |

    # commands 1:2-1:16
    ##################################################################################
    # @render("foo\n"
    #  ^~~~~~~~~~~~~^
    ##################################################################################
    render("foo\n"

  rendered: |
    foo


- name: explicit render with variable
  template: |
    @ set(FOO 1 2 3)
      render("${FOO}\n")
  compiled: |

    # commands 1:2-3:1
    ##################################################################################
    # @ set(FOO 1 2 3)
    #  ^~~~~~~~~~~~~~~~
    #v
    # 
    ##################################################################################
     set(FOO 1 2 3)
      render("${FOO}\n")

  rendered: |
    1;2;3

- name: variable substitution
  template: |
    @set(FOO 1 2 3)@@FOO@
  compiled: |

    # commands 1:2-1:16
    ##################################################################################
    # @set(FOO 1 2 3)@@FOO@
    #  ^~~~~~~~~~~~~^
    ##################################################################################
    set(FOO 1 2 3)

    # reference 1:18-1:21
    ##################################################################################
    # @set(FOO 1 2 3)@@FOO@
    #                  ^~^
    ##################################################################################
    render("${FOO}")

    # literal 1:22-2:1
    ##################################################################################
    # @set(FOO 1 2 3)@@FOO@
    #                      ^
    #v
    # 
    ##################################################################################
    render([[

    ]])
  rendered: |
    1;2;3
- name: if_else filter
  template: |
    @include(MaudTemplateFilters)
    set(TRUTHY ON)
    set(FALSY OFF)
    @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
  compiled: |

    # commands 1:2-4:1
    ##################################################################################
    # @include(MaudTemplateFilters)
    #  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    #v
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    ##################################################################################
    include(MaudTemplateFilters)
    set(TRUTHY ON)
    set(FALSY OFF)


    # pipeline init 4:3-4:10
    ##################################################################################
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    #   ^~~~~~^
    ##################################################################################
    set(IT "${TRUTHY}")

    # pipeline filter 4:12-4:24
    ##################################################################################
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    #            ^~~~~~~~~~~^
    ##################################################################################
    template_filter_if_else(1 0)

    # pipeline output 4:24-4:24
    ##################################################################################
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    #                        ^
    ##################################################################################
    render("${IT}")

    # pipeline init 4:26-4:32
    ##################################################################################
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    #                          ^~~~~^
    ##################################################################################
    set(IT "${FALSY}")

    # pipeline filter 4:34-4:46
    ##################################################################################
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    #                                  ^~~~~~~~~~~^
    ##################################################################################
    template_filter_if_else(1 0)

    # pipeline output 4:46-4:46
    ##################################################################################
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    #                                              ^
    ##################################################################################
    render("${IT}")

    # literal 4:47-5:1
    ##################################################################################
    # @@TRUTHY | if_else(1 0)@@FALSY | if_else(1 0)@
    #                                               ^
    #v
    # 
    ##################################################################################
    render([[

    ]])
  rendered: |
    10

- name: foreach filter
  template: |
    @include(MaudTemplateFilters)
     set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
  compiled: |

    # commands 1:2-2:26
    ##################################################################################
    # @include(MaudTemplateFilters)
    #  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    #~~~~~~~~~~~~~~~~~~~~~~~~~v
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    ##################################################################################
    include(MaudTemplateFilters)
     set(BOOLY ON OFF OFF ON)

    # pipeline init 2:28-2:34
    ##################################################################################
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    #                            ^~~~~^
    ##################################################################################
    set(IT "${BOOLY}")

    # pipeline foreach 2:35-2:42
    ##################################################################################
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    #                                   ^~~~~~^
    ##################################################################################
    set(foreach_IT_0)
    foreach(IT ${IT})

    # pipeline filter 2:44-2:57
    ##################################################################################
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    #                                            ^~~~~~~~~~~~^
    ##################################################################################
    template_filter_if_else(1 0) 

    # pipeline endforeach 2:58-2:68
    ##################################################################################
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    #                                                          ^~~~~~~~~^
    ##################################################################################
    list(APPEND foreach_IT_1 "${IT}")
    endforeach()
    set(IT "${foreach_IT_1}")

    # pipeline filter 2:70-2:79
    ##################################################################################
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    #                                                                      ^~~~~~~~^
    ##################################################################################
    template_filter_join("-")

    # pipeline output 2:79-2:79
    ##################################################################################
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    #                                                                               ^
    ##################################################################################
    render("${IT}")

    # literal 2:80-3:1
    ##################################################################################
    #  set(BOOLY ON OFF OFF ON)@@BOOLY |foreach| if_else(1 0) |endforeach| join("-")@
    #                                                                                ^
    #v
    # 
    ##################################################################################
    render([[

    ]])
  rendered: |
    1-0-0-1
